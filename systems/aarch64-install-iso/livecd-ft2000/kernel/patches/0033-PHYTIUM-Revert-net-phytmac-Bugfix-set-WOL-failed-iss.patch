From 125b52a2c2088329a6aa4141cd60918d2ca8181e Mon Sep 17 00:00:00 2001
From: liutianyu1250 <liutianyu1250@phytium.com.cn>
Date: Fri, 30 May 2025 10:36:36 +0800
Subject: [PATCH 33/67] PHYTIUM: Revert "net/phytmac: Bugfix set WOL failed
 issue"

This reverts commit 3161ed880479e35c7759e127c62c37d2d722edee.

Signed-off-by: liutianyu1250 <liutianyu1250@phytium.com.cn>
Link: https://gitee.com/phytium_embedded/phytium-linux-kernel/commit/bbbe8cf7d988f8c0cd1369b8aa4700541444226a
Signed-off-by: Kexy Biscuit <kexybiscuit@aosc.io>
---
 drivers/net/ethernet/phytium/phytmac_ethtool.c | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

diff --git a/drivers/net/ethernet/phytium/phytmac_ethtool.c b/drivers/net/ethernet/phytium/phytmac_ethtool.c
index 7e0c74947791..23c46bd91f26 100644
--- a/drivers/net/ethernet/phytium/phytmac_ethtool.c
+++ b/drivers/net/ethernet/phytium/phytmac_ethtool.c
@@ -90,23 +90,23 @@ static void phytmac_get_wol(struct net_device *ndev, struct ethtool_wolinfo *wol
 {
 	struct phytmac *pdata = netdev_priv(ndev);

-	wol->wolopts = 0;
 	phylink_ethtool_get_wol(pdata->phylink, wol);

-	wol->supported = WAKE_MAGIC | WAKE_ARP |
-			 WAKE_UCAST | WAKE_MCAST;
-
 	if (pdata->wol & PHYTMAC_WAKE_MAGIC) {
 		wol->wolopts |= WAKE_MAGIC;
+		wol->supported |= WAKE_MAGIC;
 	}
 	if (pdata->wol & PHYTMAC_WAKE_ARP) {
 		wol->wolopts |= WAKE_ARP;
+		wol->supported |= WAKE_ARP;
 	}
 	if (pdata->wol & PHYTMAC_WAKE_UCAST) {
 		wol->wolopts |= WAKE_UCAST;
+		wol->supported |= WAKE_UCAST;
 	}
 	if (pdata->wol & PHYTMAC_WAKE_MCAST) {
 		wol->wolopts |= WAKE_MCAST;
+		wol->supported |= WAKE_MCAST;
 	}
 }

--
2.50.1
