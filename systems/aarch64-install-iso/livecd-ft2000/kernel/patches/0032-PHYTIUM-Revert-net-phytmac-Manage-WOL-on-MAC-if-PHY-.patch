From 1db437d7d9f0ca6d17c4c890052969abf868ef33 Mon Sep 17 00:00:00 2001
From: liutianyu1250 <liutianyu1250@phytium.com.cn>
Date: Fri, 30 May 2025 10:29:38 +0800
Subject: [PATCH 32/67] PHYTIUM: Revert "net: phytmac: Manage WOL on MAC if PHY
 supports WOL"

This reverts commit 94967211afe596a9e9c5d80ca9d54e915de3a335.

Signed-off-by: liutianyu1250 <liutianyu1250@phytium.com.cn>
Link: https://gitee.com/phytium_embedded/phytium-linux-kernel/commit/15076a68a5a825e0275fb71dea20e9a0a1d54057
Signed-off-by: Kexy Biscuit <kexybiscuit@aosc.io>
---
 drivers/net/ethernet/phytium/phytmac_ethtool.c | 3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)

diff --git a/drivers/net/ethernet/phytium/phytmac_ethtool.c b/drivers/net/ethernet/phytium/phytmac_ethtool.c
index e05274b961e4..7e0c74947791 100644
--- a/drivers/net/ethernet/phytium/phytmac_ethtool.c
+++ b/drivers/net/ethernet/phytium/phytmac_ethtool.c
@@ -117,8 +117,7 @@ static int phytmac_set_wol(struct net_device *ndev, struct ethtool_wolinfo *wol)

 	ret = phylink_ethtool_set_wol(pdata->phylink, wol);

-	/* Don't manage WoL on MAC, if PHY set_wol() fails */
-	if (ret && ret != -EOPNOTSUPP)
+	if (!ret || ret != -EOPNOTSUPP)
 		return ret;

 	pdata->wol = 0;
--
2.50.1
